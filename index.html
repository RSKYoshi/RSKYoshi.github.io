<!DOCTYPE html>
<html lang="Eng">
<head>
  <title>Konami Code</title>
  <link rel="icon" type="image/x-icon" href="Konami/img/favicon-konami.ico">
  <link rel="stylesheet" href="Konami/css/konami.css">
<!--  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">-->
</head>
<body id="body">
  <div id="img"><img class="rotate" id="spinning-logo" type="hidden" src="Konami/img/konamilogo2.webp" alt="img"></div>
<!--  <form>-->
<!--    <label for="input"></label>-->
<!--    <input id="input" type="text" size="25" placeholder="&#8593 &#8593 &#8595 &#8595 &#8592 &#8594 &#8592 &#8594 b a 'enter'">-->
<!--  </form>-->
  <audio id="sfx"><source src="Konami/sfx/KONAMI-PAUSE-SOUND-NES.mp3"></audio>
  <div id="pressStart"></div>
<!--  controller below here-->
  <div id="controller" class="hidden">
    <div id="directional-buttons">
      <div class="middle"></div>
<!--      <div id="left-directional" class="left" ontouchend ="showKonamiSpin(), soundEffect1.play()" ></div>-->
      <div id="left-directional" class="left"></div>
      <div id="up-directional" class="top"></div>
      <div id="right-directional" class="right"></div>
      <div id="down-directional" class="bottom"></div>
    </div>
    <div id="selections-buttons">
      <div class="row"></div>
      <div class="row"></div>
      <div class="row">
        <div class="select">select</div>
        <div id="select-button" class="select-button w-25"></div>
        <div class="start">start
          <div id="start-button" class="start-button"></div>
        </div>
      </div>
      <div class="row bigger">
      </div>
      <div class="row"></div>
    </div>
    <div id="mainbuttons">
      <div class="a-container">
        <div id="a-button" class="a"></div>
      </div>
      <div class="b-container">
        <div id="b-button" class="b"></div>
      </div>
    </div>
    <div><h3>&#8593 &#8593 &#8595 &#8595 &#8592 &#8594 &#8592 &#8594 B A Start</h3></div>
  </div>

<script>
  "use strict";
  //need to push any keypress into userInput
  let userInput = "";
  //sequence to activate 30 lives
  const seq = "ArrowUpArrowUpArrowDownArrowDownArrowLeftArrowRightArrowLeftArrowRightbaEnter";
  const soundEffect1 = document.getElementById("sfx");



  //need to add event listeners to all divs for the controller buttons.
  //each button will equal corresponding keyboard presses
  //utilize existing function 'addFunctionality' to listen for the correct sequence

  const lBtn = document.getElementById('left-directional');
  lBtn.addEventListener("touchend", convertToLeft);
  function convertToLeft(){
    userInput+="ArrowLeft"
    console.log(userInput);
  }

  const rBtn = document.getElementById('right-directional');
  rBtn.addEventListener("touchend", convertToRight);
  function convertToRight(){
    userInput+="ArrowRight"
    console.log(userInput);
  }
  const uBtn = document.getElementById('up-directional');
  uBtn.addEventListener("touchend", convertToUp);
  function convertToUp(){
    userInput+="ArrowUp"
    console.log(userInput);
  }
  const dBtn = document.getElementById('down-directional');
  dBtn.addEventListener("touchend", convertToDown);
  function convertToDown(){
    userInput+="ArrowDown"
    console.log(userInput);
  }
  const stBtn = document.getElementById('start-button');
  stBtn.addEventListener("touchend", convertToEnter);
  function convertToEnter(){
    userInput+="Enter"
    console.log(userInput);
  }
  const aBtn = document.getElementById('a-button');
  aBtn.addEventListener("touchend", convertToA);
  function convertToA(){
    userInput+="a"
    console.log(userInput);
  }
  const bBtn = document.getElementById('b-button');
  bBtn.addEventListener("touchend", convertToB);
  function convertToB(){
    userInput+="b"
    console.log(userInput);
  }


  document.addEventListener("touchend", function (e){
    if(userInput.includes(seq)){
        do{
          soundEffect1.play();
        }while(1<0);
      //make controller go away here
      hideController();
      showKonamiSpin();
    }
  })

  //function here that makes controller go away
  function hideController(){
    let controllerId = document.getElementById("controller");
    controllerId.classList.toggle("hidden");
  }







  let controller = document.getElementById("controller");
  let pressStart = document.querySelector("#pressStart");
  pressStart.addEventListener("click", clickToShowController)
  function clickToShowController(){
    //show a clickable controller div ontop of press Start area
    // soundEffect1.play();
    controller.classList.toggle("hidden");
  }

  // function showController(){
    // let img = document.querySelector("#controller");
    // img.style.display = "block";
    // alert("This works!!");
  // }



  // this  is to capture the key and output to console
  // document.addEventListener("keyup", function(event) {
  //   console.log(event.key);
  // });

  // var image = new Image();
  // image.src =“img/konamiController.webp”;
  // document.body.appendChild(image);

  function showKonamiSpin(){
    let img = document.getElementById("img");
    img.style.display = "block";
  }
  function hideBox(){
    let input = document.getElementById("input");
    input.style.display = "none";
  }

  function addFunctionality(){
    //this adds a listener for anything typed into the entire body
    document.addEventListener("keyup", function(event) {
      //code here to store keypress to userInput
      //need to reference userInput
      userInput+=event.key;
      // console.log(userInput)
      if(userInput.includes(seq)){
        soundEffect1.play();
        // hideBox();
        showKonamiSpin();
        // alert("You have added 30 lives!")
      }
    });
  }
  addFunctionality();
  //code to check if user input fulfills seq
  // if(userInput === seq){
  //   alert("You have added 30 lives!")
  // }




</script>

</body>
</html>

